<script>
    document.addEventListener('DOMContentLoaded', function(){
      var courseId;
      var deleteForm = document.forms['delete-course-form'];
      var containerForm = document.forms['container-form'];
      var btnDelCourse = document.getElementById('btn-delete-course');
      var checkboxAll = $('#checkbox-all');
      var courseItemCheckbox = $('input[name="coursesIds[]"]');
      var execBtn = $('button.btn-execute');

      // when dialog confirm showed
      $('#delete-course-modal').on('show.bs.modal', function (event) {
          var button = $(event.relatedTarget); 
          courseId = button.data('id');    
      });

      btnDelCourse.onclick = function(){
          deleteForm.action = '/courses/' + courseId + '?_method=DELETE';
          deleteForm.submit();
      }

      //checkbox all checked
      checkboxAll.change(function(){
        var isCheckedAll = $(this).prop('checked');
        courseItemCheckbox.prop('checked', isCheckedAll);
        renderCheckallSubmitBtn();
      })

      // Course item checkbox changed
      courseItemCheckbox.change(function(){
        var isCheckedAll = courseItemCheckbox.length === $('input[name="coursesIds[]"]:checked').length;
        checkboxAll.prop('checked', isCheckedAll);
        renderCheckallSubmitBtn();
      })

      // check all excute button clicked
      execBtn.on('submit', function(e){
        var isSubmittable = $(this).hasClass('disabled');
        if(isSubmittable) {
          e.preventDefault()
        }
      })

      // re-render check all submit button
      function renderCheckallSubmitBtn(){
        var countChecked = $('input[name="coursesIds[]"]:checked').length;
        if(countChecked){
          execBtn.removeClass('disabled');
        } else {
          execBtn.addClass('disabled');
        }
      } 

    })
    
</script>