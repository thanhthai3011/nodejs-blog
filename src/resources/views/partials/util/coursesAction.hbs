<div class="mt-4 d-flex align-items-center">
  <div class="form-check">
    <input type="checkbox" class="form-check-input" id="checkbox-all" />
    <label class="form-check-label user-select-none" for="checkbox-all">Check
      all</label>
  </div>

  <select
    class="form-control form-control-sm checkbox-select-all-options"
    name="action"
    required
  >
    <option value="">-- Select action --</option>
    {{#if deletedCount}}
      <option value="delete">Delete</option>
    {{!-- {{else}}
      <option value="restore">Restore</option>
      <option value="forceDelete">Force delete</option> --}}
    {{/if}}
  </select>

  <button class="btn btn-primary btn-sm disabled btn-execute">Excute</button>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function(){
      var containerForm = document.forms['container-form'];
      var checkboxAll = $('#checkbox-all');
      var courseItemCheckbox = $('input[name="coursesIds[]"]');
      var execBtn = $('button.btn-execute');

      //checkbox all checked
      checkboxAll.change(function(){
        var isCheckedAll = $(this).prop('checked');
        courseItemCheckbox.prop('checked', isCheckedAll);
        renderCheckallSubmitBtn();
      })

      // Course item checkbox changed
      courseItemCheckbox.change(function(){
        var isCheckedAll = courseItemCheckbox.length === $('input[name="coursesIds[]"]:checked').length;
        checkboxAll.prop('checked', isCheckedAll);
        renderCheckallSubmitBtn();
      })

      // check all excute button clicked
      execBtn.on('submit', function(e){
        var isSubmittable = $(this).hasClass('disabled');
        if(isSubmittable) {
          e.preventDefault()
        }
      })

      // re-render check all submit button
      function renderCheckallSubmitBtn(){
        var countChecked = $('input[name="coursesIds[]"]:checked').length;
        if(countChecked){
          execBtn.removeClass('disabled');
        } else {
          execBtn.addClass('disabled');
        }
      } 

    })
</script>